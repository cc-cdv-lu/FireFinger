<div
  id="page-settings"
  role="tabpanel"
  class="container"
  [ngClass]="style.theme"
>
  <button mat-raised-button color="accent" (click)="saveSettings()">
    <mat-icon>save</mat-icon>
    {{ 'settings.voice.control.save' | translate }}
  </button>

  <mat-accordion>
    <!--
    ______          _                  _         _      
  |  ____|        | |     ___        | |       | |     
  | |__ ___  _ __ | |_   ( _ )    ___| |_ _   _| | ___ 
  |  __/ _ \| '_ \| __|  / _ \/\ / __| __| | | | |/ _ \
  | | | (_) | | | | |_  | (_>  < \__ \ |_| |_| | |  __/
  |_|  \___/|_| |_|\__|  \___/\/ |___/\__|\__, |_|\___|
                                          __/ |       
                                         |___/        
    -->
    <mat-expansion-panel>
      <mat-expansion-panel-header
        [collapsedHeight]="'5rem'"
        [expandedHeight]="'8rem'"
      >
        <mat-panel-title>
          {{ 'settings.style.title' | translate }}
        </mat-panel-title>
      </mat-expansion-panel-header>

      <section class="section">
        <h4>{{ 'settings.style.theme' | translate }}</h4>
        <mat-grid-list cols="3" rowHeight="4rem">
          <mat-grid-tile *ngFor="let theme of style.themes">
            <button
              mat-raised-button
              color="primary"
              [ngClass]="theme.id === style.theme ? 'highlight' : ''"
              (click)="changeTheme(theme.id)"
            >
              {{ theme.name }}
            </button>
          </mat-grid-tile>
        </mat-grid-list>
        <div class="preview">
          <p [ngClass]="style.theme">
            <span class="prev">Pre</span>
            <span class="highlight">vi</span>
            <span class="next">ew</span>
          </p>
        </div>
      </section>

      <section class="section">
        <mat-grid-list cols="10">
          <mat-grid-tile
            colspan="9"
            (click)="style.warning_flash = !style.warning_flash"
          >
            <p>{{ 'settings.style.errorwarning' | translate }}</p>
          </mat-grid-tile>
          <mat-grid-tile colspan="1">
            <mat-slide-toggle color="warn" [(ngModel)]="style.warning_flash">
            </mat-slide-toggle>
          </mat-grid-tile>
        </mat-grid-list>
      </section>

      <section class="section">
        <mat-grid-list cols="10">
          <mat-grid-tile
            colspan="9"
            (click)="style.show_guideline = !style.show_guideline"
          >
            <p>{{ 'settings.style.showGuideline' | translate }}</p>
          </mat-grid-tile>
          <mat-grid-tile colspan="1">
            <mat-slide-toggle color="warn" [(ngModel)]="style.show_guideline">
            </mat-slide-toggle>
          </mat-grid-tile>
        </mat-grid-list>
      </section>

      <section class="section">
        <mat-grid-list cols="10">
          <mat-grid-tile
            colspan="9"
            (click)="style.hide_focus = !style.hide_focus"
          >
            <p>{{ 'settings.style.hideFocus' | translate }}</p>
          </mat-grid-tile>
          <mat-grid-tile colspan="1">
            <mat-slide-toggle color="warn" [(ngModel)]="style.hide_focus">
            </mat-slide-toggle>
          </mat-grid-tile>
        </mat-grid-list>
      </section>

      <section class="section">
        <mat-grid-list cols="9" class="voiceSettings">
          <mat-grid-tile colspan="2">
            <h5>{{ 'settings.style.fontsize' | translate }}</h5>
          </mat-grid-tile>
          <mat-grid-tile colspan="4"> <p></p> </mat-grid-tile>
          <mat-grid-tile>
            <input
              matInput
              [(ngModel)]="style.font"
              type="number"
              min="1"
              max="150"
            />
          </mat-grid-tile>
          <mat-grid-tile colspan="2"> <b> (1 - 150)</b> </mat-grid-tile>
          <mat-grid-tile colspan="9">
            <p>{{ 'settings.style.fontshortcut' | translate }}</p>
          </mat-grid-tile>
        </mat-grid-list>

        <mat-grid-list cols="9">
          <mat-grid-tile colspan="2">
            <h5>
              {{ 'settings.style.fontFamily' | translate }}
            </h5>
          </mat-grid-tile>
          <mat-grid-tile colspan="4"> <p></p> </mat-grid-tile>
          <mat-grid-tile colspan="3">
            <mat-select
              placeholder="{{ 'settings.style.fontFamily' | translate }}"
              [(value)]="style.fontFamily"
            >
              <mat-option
                *ngFor="let fontF of style.fontFamilies"
                [value]="fontF"
              >
                <p [ngStyle]="{ 'font-family': fontF }">
                  {{ fontF }}
                </p>
              </mat-option>
            </mat-select>
          </mat-grid-tile>
          <mat-grid-tile colspan="1"></mat-grid-tile>
          <mat-grid-tile colspan="4">
            <p>{{ 'settings.style.fontFamilyNote' | translate }}</p>
          </mat-grid-tile>
          <mat-grid-tile colspan="3">
            <a
              mat-raised-button
              color="accent"
              target="_blank"
              href="http://wiki.idv.lu/display/PUB/FireFinger"
              rel="noopener noreferrer"
            >
              <mat-icon>info</mat-icon>
              Wiki Link
            </a>
          </mat-grid-tile>
          <mat-grid-tile colspan="1"></mat-grid-tile>
        </mat-grid-list>
      </section>
    </mat-expansion-panel>

    <!--

                       _ _           _   _             
     /\               | (_)         | | (_)            
    /  \   _ __  _ __ | |_  ___ __ _| |_ _  ___  _ __  
   / /\ \ | '_ \| '_ \| | |/ __/ _` | __| |/ _ \| '_ \ 
  / ____ \| |_) | |_) | | | (_| (_| | |_| | (_) | | | |
 /_/    \_\ .__/| .__/|_|_|\___\__,_|\__|_|\___/|_| |_|
          | |   | |                                    
          |_|   |_|                                    
    -->
    <mat-expansion-panel>
      <mat-expansion-panel-header
        [collapsedHeight]="'5rem'"
        [expandedHeight]="'8rem'"
      >
        <mat-panel-title>
          {{ 'settings.application.title' | translate }}
        </mat-panel-title>
      </mat-expansion-panel-header>

      <section class="section">
        <h4>{{ 'settings.application.lang.title' | translate }}</h4>
        <p>{{ 'settings.application.lang.description' | translate }}</p>

        <mat-form-field>
          <mat-select
            placeholder="Language"
            [(value)]="lang"
            (selectionChange)="onLangChange()"
          >
            <mat-option *ngFor="let l of langs" [value]="l.id">
              {{ l.description }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </section>

      <section class="section">
        <h4>{{ 'settings.application.files.title' | translate }}</h4>
        <p>{{ 'settings.application.files.description' | translate }}</p>
        <mat-grid-list cols="17">
          <div *ngFor="let url of file.getDocsURLs(); let i = index">
            <mat-grid-tile colspan="15" class="url">
              <p>{{ url }}</p>
            </mat-grid-tile>
            <mat-grid-tile>
              <button
                mat-raised-button
                color="accent"
                (click)="file.openFolderInExplorer(url)"
                attr.aria-label="{{
                  'settings.application.files.button' | translate
                }}"
              >
                <mat-icon>folder</mat-icon>
              </button>
            </mat-grid-tile>
            <mat-grid-tile>
              <button
                [disabled]="i == 0"
                mat-raised-button
                color="warn"
                attr.aria-label="{{
                  'settings.application.files.delete' | translate
                }}"
                (click)="file.removeDocsURL(i)"
              >
                <mat-icon>clear</mat-icon>
              </button>
            </mat-grid-tile>
          </div>
        </mat-grid-list>
        <button
          mat-raised-button
          color="accent"
          attr.aria-label="{{ 'settings.application.files.add' | translate }}"
          (click)="selectNewDocsURL()"
        >
          <mat-icon>add</mat-icon>
          {{ 'settings.application.files.add' | translate }}
        </button>
      </section>

      <section class="section">
        <h4>{{ 'settings.application.difficulty.title' | translate }}</h4>
        <mat-grid-list cols="9" gutterSize="25" rowHeight="160">
          <div *ngFor="let s of difficultySettings">
            <mat-grid-tile colspan="2">
              <h5>{{ s.translate_key + '.title' | translate }}</h5>
            </mat-grid-tile>
            <mat-grid-tile colspan="3">
              <p>{{ s.translate_key + '.description' | translate }}</p>
            </mat-grid-tile>
            <mat-grid-tile colspan="2">
              <input
                matInput
                [(ngModel)]="session.difficulty[s.value_key]"
                type="number"
                [min]="s.min"
                [max]="s.max"
              />
            </mat-grid-tile>
            <mat-grid-tile colspan="2">
              <b>{{ s.min }}-{{ s.max }}</b>
            </mat-grid-tile>
          </div>
        </mat-grid-list>

        <mat-divider></mat-divider>
        <mat-grid-list cols="10">
          <mat-grid-tile
            colspan="4"
            (click)="
              session.difficulty.playWinSound = !session.difficulty.playWinSound
            "
          >
            <p>
              {{ 'settings.application.difficulty.playWinSound' | translate }}
            </p>
          </mat-grid-tile>
          <mat-grid-tile colspan="1">
            <mat-slide-toggle
              color="warn"
              [(ngModel)]="session.difficulty.playWinSound"
            >
            </mat-slide-toggle>
          </mat-grid-tile>

          <mat-grid-tile
            colspan="4"
            (click)="
              session.difficulty.playFailSound = !session.difficulty
                .playFailSound
            "
          >
            <p>
              {{ 'settings.application.difficulty.playFailSound' | translate }}
            </p>
          </mat-grid-tile>
          <mat-grid-tile colspan="1">
            <mat-slide-toggle
              color="warn"
              [(ngModel)]="session.difficulty.playFailSound"
            >
            </mat-slide-toggle>
          </mat-grid-tile>
        </mat-grid-list>
      </section>

      <section class="section">
        <h4>Developper</h4>
        <p>No touchy</p>
        <button
          mat-raised-button
          color="warn"
          (click)="electron.openDevTools()"
        >
          <mat-icon>developer_mode</mat-icon>
          Developper Tools
        </button>
      </section>
    </mat-expansion-panel>

    <!--
 __      __   _          
 \ \    / /  (_)         
  \ \  / /__  _  ___ ___ 
   \ \/ / _ \| |/ __/ _ \
    \  / (_) | | (_|  __/
     \/ \___/|_|\___\___|                                                  
    -->
    <mat-expansion-panel>
      <mat-expansion-panel-header
        [collapsedHeight]="'5rem'"
        [expandedHeight]="'8rem'"
      >
        <mat-panel-title>
          {{ 'settings.voice.title' | translate }}
        </mat-panel-title>
      </mat-expansion-panel-header>

      <section class="section">
        <h4>{{ 'settings.voice.control.title' | translate }}</h4>
        <mat-form-field>
          <input
            matInput
            placeholder="{{ 'settings.voice.control.testphrase' | translate }}"
            [(ngModel)]="reader.config.test"
            [ngModelOptions]="{ standalone: true }"
          />
          <button mat-raised-button color="primary" (click)="readTest()">
            {{ 'settings.voice.control.test' | translate }}
          </button>
        </mat-form-field>
      </section>

      <mat-divider></mat-divider>

      <section class="section">
        <h4>{{ 'settings.voice.variant' | translate }}</h4>
        <mat-form-field>
          <mat-select
            placeholder="Speaking voice"
            [(value)]="reader.config.options.variant"
          >
            <mat-option
              *ngFor="let variant of reader.variants"
              [value]="variant.id"
            >
              {{ variant.description }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-select
            placeholder="Speaking language"
            [(value)]="reader.config.voice"
            (selectionChange)="onVoiceChange()"
          >
            <mat-option
              *ngFor="let voice of reader.voices"
              [value]="voice.url"
              (click)="reader.config.voice_id = voice.id"
            >
              {{ voice.description }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </section>

      <mat-divider></mat-divider>
      <section class="section">
        <mat-grid-list cols="9" class="voiceSettings" gutterSize="25">
          <div *ngFor="let s of voiceSettings">
            <mat-grid-tile colspan="2">
              <h5>{{ s.translate_key + '.title' | translate }}</h5>
            </mat-grid-tile>
            <mat-grid-tile colspan="3">
              <p>{{ s.translate_key + '.description' | translate }}</p>
            </mat-grid-tile>
            <mat-grid-tile colspan="2">
              <input
                matInput
                [(ngModel)]="reader.config.options[s.value_key]"
                type="number"
                [min]="s.min"
                [max]="s.max"
              />
            </mat-grid-tile>
            <mat-grid-tile colspan="2">
              <b>{{ s.min }}-{{ s.max }}</b>
            </mat-grid-tile>
          </div>
        </mat-grid-list>
        <p
          innerHTML="{{
            'settings.voice.other.capitals.longDescription' | translate
          }}"
        ></p>
      </section>
    </mat-expansion-panel>
  </mat-accordion>

  <mat-card class="infoBox">
    <mat-card-header>
      <mat-card-title>
        <img mat-card-avatar src="assets/icons/png/64x64.png" />
        FireFinger v{{ version }}
      </mat-card-title>
      <mat-card-subtitle>
        <p>{{ 'settings.about.title' | translate }}</p>
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <mat-grid-list cols="10">
        <mat-grid-tile colspan="1"> </mat-grid-tile>
        <mat-grid-tile colspan="2">
          <button
            mat-raised-button
            (click)="
              openLink(
                'mailto:julien.hoffmann@cc-cdv.lu?subject=FireFinger&body=Hello, I am contacting you about FireFinger because...'
              )
            "
          >
            <mat-icon>mail</mat-icon>
            Mail
          </button>
        </mat-grid-tile>
        <mat-grid-tile colspan="2">
          <button mat-raised-button (click)="openLink('http://cc-cdv.lu')">
            <mat-icon>web</mat-icon>
            Webpage
          </button>
        </mat-grid-tile>
        <mat-grid-tile colspan="2">
          <button mat-raised-button (click)="openLink('tel:+352 45 43 06 - 1')">
            <mat-icon>phone</mat-icon>
            Call
          </button>
        </mat-grid-tile>
        <mat-grid-tile colspan="2">
          <button
            mat-raised-button
            (click)="openLink('tel:+352 45 43 06 - 700')"
          >
            <mat-icon>message</mat-icon>
            Fax
          </button>
        </mat-grid-tile>
        <mat-grid-tile colspan="1"> </mat-grid-tile>

        <mat-grid-tile colspan="2"> </mat-grid-tile>
        <mat-grid-tile colspan="4">
          <p class="smallText">
            {{ 'settings.about.wiki' | translate }}
          </p>
        </mat-grid-tile>
        <mat-grid-tile colspan="2">
          <a
            mat-raised-button
            (click)="openLink('http://wiki.idv.lu/display/PUB/FireFinger')"
          >
            <mat-icon>info</mat-icon>
            Wiki
          </a>
        </mat-grid-tile>
        <mat-grid-tile colspan="2"> </mat-grid-tile>

        <mat-grid-tile colspan="7">
          <p class="smallText">
            Developped by Centre pour le développement des compétences relatives
            à la vue
          </p>
        </mat-grid-tile>
        <mat-grid-tile colspan="3">
          <img mat-card-image class="cdv" src="assets/img/cdv.png" />
        </mat-grid-tile>
      </mat-grid-list>
    </mat-card-content>
    <mat-card-footer> </mat-card-footer>
  </mat-card>
</div>
