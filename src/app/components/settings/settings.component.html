<div class="container" [ngClass]="style.theme">
  <button mat-raised-button color="accent" (click)="reader.save()">
    <mat-icon>save</mat-icon>
    {{ 'settings.voice.control.save' | translate }}
  </button>

  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header
        [collapsedHeight]="'5rem'"
        [expandedHeight]="'8rem'"
      >
        <mat-panel-title>
          {{ 'settings.style.title' | translate }}
        </mat-panel-title>
      </mat-expansion-panel-header>

      <section class="section">
        <h4>{{'settings.style.theme' | translate }}</h4>
        <mat-grid-list cols="4" rowHeight="4rem">
          <mat-grid-tile *ngFor="let theme of style.themes">
            <button
              mat-raised-button
              color="primary"
              [ngClass]="theme.id === style.theme ? 'highlight' : ''"
              (click)="changeTheme(theme.id)"
            >
              {{ theme.name }}
            </button>
          </mat-grid-tile>
        </mat-grid-list>
        <div class="preview">
          <p [ngClass]="style.theme">Pre<span class="highlight">vi</span>ew</p>
        </div>
      </section>

      <section class="section">
        <mat-grid-list cols="10">
          <mat-grid-tile colspan="9" (click)="style.warning_flash = !style.warning_flash">
            <p>{{ 'settings.style.errorwarning' | translate }}</p>
          </mat-grid-tile>
          <mat-grid-tile colspan="1">
            <mat-slide-toggle color="warn" [(ngModel)]="style.warning_flash">
            </mat-slide-toggle>
          </mat-grid-tile>
        </mat-grid-list>
      </section>

      <section class="section">
        <mat-grid-list cols="9" class="voiceSettings">
          <mat-grid-tile colspan="2">
            <h5>{{ 'settings.style.fontsize' | translate }}</h5>
          </mat-grid-tile>
          <mat-grid-tile colspan="4"> <p></p> </mat-grid-tile>
          <mat-grid-tile>
            <input
              matInput
              [(ngModel)]="style.font"
              type="number"
              min="1"
              max="150"
              (change)="onChange($event, value_key)"
            />
          </mat-grid-tile>
          <mat-grid-tile colspan="2"> <b> (1 - 150)</b> </mat-grid-tile>
          <mat-grid-tile colspan="9">
            <p>{{'settings.style.fontshortcut'|translate}}</p>
          </mat-grid-tile>
        </mat-grid-list>
      </section>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header
        [collapsedHeight]="'5rem'"
        [expandedHeight]="'8rem'"
      >
        <mat-panel-title>
          {{ 'settings.application.title' | translate }}
        </mat-panel-title>
        <!--
          <mat-panel-description  [style.font-size]="style.getFontSize(SIZE.SMALLER)" [style.color]="style.activeColorScheme.prev">
            {{'settings.application.description' | translate}}
          </mat-panel-description>
        -->
      </mat-expansion-panel-header>

      <section class="section">
        <h4>{{ 'settings.application.files.title' | translate }}</h4>
        <p>{{ 'settings.application.files.description' | translate }}</p>
        <button
          mat-raised-button
          color="accent"
          (click)="lessons.openDocsFolderInExplorer()"
        >
          <mat-icon>folder</mat-icon>
          {{ 'settings.application.files.button' | translate }}
        </button>
      </section>

      <section class="section">
        <h4>{{ 'settings.application.lang.title' | translate }}</h4>
        <p>{{ 'settings.application.lang.description' | translate }}</p>

        <mat-form-field>
          <mat-select
            placeholder="Language"
            [(value)]="lang"
            (selectionChange)="onLangChange()"
          >
            <mat-option *ngFor="let l of langs" [value]="l.id">
              {{ l.description }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </section>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header
        [collapsedHeight]="'5rem'"
        [expandedHeight]="'8rem'"
      >
        <mat-panel-title>
          {{ 'settings.voice.title' | translate }}
        </mat-panel-title>
        <!--
          <mat-panel-description  [style.font-size]="style.getFontSize(SIZE.SMALLER)" [style.color]="style.activeColorScheme.prev">
            {{'settings.voice.description' | translate}}
          </mat-panel-description>
        -->
      </mat-expansion-panel-header>

      <section class="section">
        <h4>{{ 'settings.voice.control.title' | translate }}</h4>
        <mat-form-field>
          <input
            matInput
            placeholder="{{'settings.voice.control.testphrase'|translate}}"
            [(ngModel)]="reader.config.test"
            [ngModelOptions]="{ standalone: true }"
          />
          <button mat-raised-button color="primary" (click)="readTest()">
            {{ 'settings.voice.control.test' | translate }}
          </button>
        </mat-form-field>
      </section>

      <mat-divider></mat-divider>

      <section class="section">
        <h4>{{ 'settings.voice.variant' | translate }}</h4>
        <mat-form-field >
          <mat-select
            placeholder="Speaking voice"
            [(value)]="reader.config.options.variant"
          >
            <mat-option
              *ngFor="let variant of reader.variants"
              [value]="variant.id"
            >
              {{ variant.description }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-select
            placeholder="Speaking language"
            [(value)]="reader.config.voice"
            (selectionChange)="onVoiceChange()"
          >
            <mat-option *ngFor="let voice of reader.voices" [value]="voice.url">
              {{ voice.description }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </section>

      <mat-divider></mat-divider>
      <section class="section">
        <mat-grid-list cols="8" class="voiceSettings" gutterSize="100">
          <div *ngFor="let s of voiceSettings">
            <mat-grid-tile colspan="2">
              <h5>{{ s.translate_key + '.title' | translate }}</h5>
            </mat-grid-tile>
            <mat-grid-tile colspan="3">
              <p>{{ s.translate_key + '.description' | translate }}</p>
            </mat-grid-tile>
            <mat-grid-tile colspan="2">
                <input
                  matInput
                  [(ngModel)]="reader.config.options[s.value_key]"
                  type="number"
                  [min]="s.min"
                  [max]="s.max"
                />
            </mat-grid-tile>
            <mat-grid-tile>
              <b> ({{ s.min }} - {{ s.max }})</b>
            </mat-grid-tile>
          </div>
        </mat-grid-list>
        <p
          innerHTML="{{'settings.voice.other.capitals.longDescription' | translate}}"
        ></p>
      </section>
    </mat-expansion-panel>
  </mat-accordion>
</div>
